import{e as _,W as I}from"./index.NErPTbHe.js";import{a as d}from"./index.DgoachrA.js";const E=5,g=6,C=10;let W=(n,e,t,s)=>(n.events=n.events||{},n.events[t+C]||(n.events[t+C]=s(r=>{n.events[t].reduceRight((i,o)=>(o(i),i),{shared:{},...r})})),n.events[t]=n.events[t]||[],n.events[t].push(e),()=>{let r=n.events[t],i=r.indexOf(e);r.splice(i,1),r.length||(delete n.events[t],n.events[t+C](),delete n.events[t+C])}),x=1e3,M=(n,e)=>W(n,s=>{let r=e(s);r&&n.events[g].push(r)},E,s=>{let r=n.listen;n.listen=(...o)=>(!n.lc&&!n.active&&(n.active=!0,s()),r(...o));let i=n.off;return n.events[g]=[],n.off=()=>{i(),setTimeout(()=>{if(n.active&&!n.lc){n.active=!1;for(let o of n.events[g])o();n.events[g]=[]}},x)},()=>{n.listen=r,n.off=i}}),O=(n,e,t)=>{Array.isArray(n)||(n=[n]);let s,r=0,i=()=>{let u=n.map(l=>l.get());if(s===void 0||u.some((l,c)=>l!==s[c])){let l=++r;s=u;let c=e(...u);c&&c.then&&c.t?c.then(v=>{l===r&&o.set(v)}):o.set(c)}},o=d(void 0,Math.max(...n.map(u=>u.l))+1),a=i;return M(o,()=>{let u=n.map(l=>l.listen(a,-1/o.l));return i(),()=>{for(let l of u)l()}}),o},U=(n,e)=>O(n,e),N=(n={})=>{let e=d(n);return e.setKey=function(t,s){let r=e.value;typeof s>"u"&&t in e.value?(e.value={...e.value},delete e.value[t],e.notify(r,t)):e.value[t]!==s&&(e.value={...e.value,[t]:s},e.notify(r,t))},e};const z=Symbol("kTaskCancelled");class T extends Error{}function m(n,e={}){const t=new AbortController,s=()=>t.abort(new T),r=e.signal;let i=n(t.signal);return r&&(i=i.finally(()=>r.removeEventListener("abort",s)),r.addEventListener("abort",s,{once:!0})),{promise:e.ignoreCancel?i.catch(o=>{if(!(o instanceof T))throw o;return z}):i,cancel(){t.abort(new T)}}}function $(){if(typeof Promise.withResolvers=="function")return Promise.withResolvers();let n,e;const t=new Promise((s,r)=>{n=s,e=r});return{resolve:n,reject:e,promise:t}}function J(n){return new Promise(e=>setTimeout(e,1e4))}function j(){return new Promise(n=>{setTimeout(n)})}class B{_baseURL;_map=new Map;_templateLoadTask;_templateLoaded;constructor(e="/"){this._baseURL=e}async invalidate(e){if(!this._map.has(e))return{type:"none"};const t=q(e);let s;return this._templateLoaded===e?s=await this._fetchTemplate(e).promise:s=await this._fetchFiles(e),{type:t,files:s}}async getLessonTemplate(e){const t=`template-${e.data.template}.json`;return this._map.has(t)?this._map.get(t):this._templateLoadTask&&this._templateLoaded===t?this._templateLoadTask.promise:this._fetchTemplate(t).promise}getLessonFiles(e){return this._getFilesFromFilesRefList(e.files)}getLessonSolution(e){return this._getFilesFromFilesRefList(e.solution)}_fetchTemplate(e){this._templateLoadTask?.cancel();const t=m(async s=>{const r=await fetch(`${this._baseURL}${e}`,{signal:s});if(!r.ok)throw new Error(`Failed to fetch: status ${r.status}`);const i=R(await r.json());return this._map.set(e,i),s.throwIfAborted(),i});return this._templateLoadTask=t,this._templateLoaded=e,t}async _getFilesFromFilesRefList(e){if(e[1].length===0)return{};const t=e[0];return this._map.has(t)?this._map.get(t):this._fetchFiles(t)}async _fetchFiles(e){let t=2;for(;;){try{const s=await fetch(`${this._baseURL}${e}`);if(!s.ok)throw new Error(`Failed to fetch ${e}: ${s.status} ${s.statusText}`);const r=R(await s.json());return this._map.set(e,r),r}catch(s){if(t<=0)return console.error(`Failed to fetch ${e} after 3 attempts.`),console.error(s),{}}t-=1,await J()}}}function R(n){const e={};if(typeof n!="object")return e;for(const t in n){const s=n[t];let r;typeof s=="object"?r=Uint8Array.from(atob(s.base64),i=>i.charCodeAt(0)):r=s,e[t]=r}return e}function q(n){return n.startsWith("template-")?"template":n.endsWith("files.json")?"files":"solution"}const p="\x1B[0m",w={reset:p,clear:"\x1B[g",red:n=>`\x1B[1;31m${n}${p}`,gray:n=>`\x1B[37m${n}${p}`,green:n=>`\x1B[1;32m${n}${p}`,magenta:n=>`\x1B[35m${n}${p}`};function b(n){n?.reset(),n?.write(w.clear)}class F{prepareCommands;mainCommand;constructor({prepareCommands:e,mainCommand:t}){this.prepareCommands=e?.map(s=>new f(s)),this.mainCommand=t?new f(t):void 0}[Symbol.iterator](){const e=this;return function*(){for(const t of e.prepareCommands??[])yield t;e.mainCommand&&(yield e.mainCommand)}()}}class f{shellCommand;title;constructor(e){this.shellCommand=f.toShellCommand(e),this.title=f.toTitle(e)}isRunnable(){return this.shellCommand!==""}static equals(e,t){return e.shellCommand===t.shellCommand}static toTitle(e){let t="";return typeof e=="string"?t=e:Array.isArray(e)?t=e[1]:t=e.title,t}static toShellCommand(e){return typeof e=="string"?e:Array.isArray(e)?e[0]:e.command}}class V{steps=d(void 0);setFromCommands(e){e.length>0?this.steps.set(e.map(t=>({title:t.title,status:"idle"}))):this.steps.set(void 0)}updateStep(e,t){const s=this.steps.value;s&&this.steps.set([...s.slice(0,e),t,...s.slice(e+1)])}skipRemaining(e){const t=this.steps.value;t&&this.steps.set([...t.slice(0,e),...t.slice(e).map(s=>({...s,status:"skipped"}))])}}function H(n,e){const t={},s=[];for(const r in n){const i=n[r],o=e[r];typeof o>"u"?s.push(r):i!==o&&(t[r]=o)}for(const r in e)r in n||(t[r]=e[r]);return{addedOrModified:t,removed:s}}function L(n){const e={};for(const t in n){const s=t.split("/").filter(i=>i);let r=e;for(let i=0;i<s.length;++i){const o=s[i];if(i===s.length-1)r[o]={file:{contents:n[t]}};else{let a=r[o];Y(a),a||(a={directory:{}},r[o]=a),r=a.directory}}}return e}function Y(n){if(n&&!("directory"in n))throw new Error("Expected directory node")}class G{_webcontainer;_terminalStore;_stepController;_currentLoadTask=void 0;_currentProcessTask=void 0;_currentCommandProcess=void 0;_currentTemplate=void 0;_currentFiles=void 0;_currentRunCommands=void 0;_packageJsonDirty=!1;_commandsChanged=!1;_packageJsonContent="";constructor(e,t,s){this._webcontainer=e,this._terminalStore=t,this._stepController=s}setCommands(e){const t=new F(e);this._changeDetection(e)&&(this._stepController.setFromCommands([...t]),this._currentRunCommands=t,this._commandsChanged=!0)}onTerminalResize(e,t){this._currentCommandProcess?.resize({cols:e,rows:t})}updateFile(e,t){const s=this._currentLoadTask?.promise;this._currentLoadTask=m(async r=>{await s;const i=await this._webcontainer;r.throwIfAborted(),await i.fs.writeFile(e,t),this._updateCurrentFiles({[e]:t})},{ignoreCancel:!0})}updateFiles(e){const t=this._currentLoadTask?.promise;this._currentLoadTask=m(async s=>{await t;const r=await this._webcontainer;s.throwIfAborted(),await r.mount(L(e)),this._updateCurrentFiles(e)},{ignoreCancel:!0})}prepareFiles({files:e,template:t,signal:s,abortPreviousLoad:r=!0}){const i=this._currentLoadTask?.promise;return r&&this._currentLoadTask?.cancel(),this._currentLoadTask=m(async o=>{await i;const a=await this._webcontainer;o.throwIfAborted(),[t,e]=await Promise.all([t,e]),o.throwIfAborted(),this._currentFiles||this._currentTemplate?await Q(a,{...this._currentTemplate,...this._currentFiles},{...t,...e}):await a.mount(L({...t,...e})),this._currentTemplate={...t},this._currentFiles={...e},this._updateDirtyState(e)},{ignoreCancel:!0,signal:s}),this._currentLoadTask.promise}runCommands({abortPreviousRun:e=!0}={}){const t=this._currentProcessTask,s=this._currentLoadTask?.promise,r=this._currentRunCommands,i=this._commandsChanged;if(!r)throw new Error("setCommands should be called before runCommands");this._currentProcessTask=m(async o=>{if(await s,o.aborted&&e&&t?.cancel(),o.throwIfAborted(),!(this._packageJsonDirty||i)){if(t){const l=()=>t.cancel();return o.addEventListener("abort",l,{once:!0}),t.promise}return}this._commandsChanged=!1,e&&t?.cancel(),await t?.promise;const u=await this._webcontainer;return o.throwIfAborted(),this._runCommands(u,r,o)},{ignoreCancel:!0})}restartLastRunCommands(){if(!this._currentRunCommands||!this._currentProcessTask)return;const e=this._currentRunCommands,t=this._currentProcessTask.promise,s=this._currentLoadTask?.promise;this._currentProcessTask.cancel(),this._currentProcessTask=m(async r=>{await Promise.all([t,s]);const i=await this._webcontainer;return r.throwIfAborted(),this._runCommands(i,e,r)},{ignoreCancel:!0})}async _runCommands(e,t,s){const r=this._terminalStore.getOutputPanel();b(r);const i=()=>this._currentCommandProcess?.kill();s.addEventListener("abort",i,{once:!0});const o=!!t.mainCommand;try{const a=[...t];this._stepController.setFromCommands(a);let u=0;for(const[l,c]of a.entries()){const v=l===a.length-1&&!!t.mainCommand;if(!c.isRunnable()){this._stepController.updateStep(l,{title:c.title,status:"skipped"});continue}this._stepController.updateStep(l,{title:c.title,status:"running"}),u>0&&r?.write(`
`),u++,this._currentCommandProcess=await this._newProcess(e,r,c.shellCommand);try{s.throwIfAborted()}catch(y){throw this._stepController.skipRemaining(l),y}if(v&&this._clearDirtyState(),await this._currentCommandProcess.exit!==0){this._stepController.updateStep(l,{title:c.title,status:"failed"}),this._stepController.skipRemaining(l+1);break}else this._stepController.updateStep(l,{title:c.title,status:"completed"});try{s.throwIfAborted()}catch(y){throw this._stepController.skipRemaining(l+1),y}}o||this._clearDirtyState()}finally{s.removeEventListener("abort",i)}}async _newProcess(e,t,s){const[r,...i]=s.split(" ");t?.write(`${w.magenta("â¯")} ${w.green(r)} ${i.join(" ")}
`);const o=await e.spawn(r,i,{terminal:t?{cols:t.cols??80,rows:t.rows??15}:void 0});return o.output.pipeTo(new WritableStream({write:a=>t?.write(a)})),o}_updateDirtyState(e){for(const t in e)if(t.endsWith("/package.json")&&e[t]!=this._packageJsonContent){this._packageJsonContent=e[t],this._packageJsonDirty=!0;return}}_updateCurrentFiles(e){if(this._currentFiles)for(const t in e)this._currentFiles[t]=e[t];else this._currentFiles={...e};this._updateDirtyState(e)}_clearDirtyState(){this._packageJsonDirty=!1}_changeDetection(e){if(this._packageJsonDirty||!this._currentRunCommands)return!0;const t=P(this._currentRunCommands),s=P(e);if(t.length!==s.length)return!0;for(let r=0;r<t.length;++r)if(!f.equals(t[r],s[r]))return!0;return!1}}function P(n){return n instanceof F?[...n].filter(e=>e.isRunnable()):P(new F(n))}async function Q(n,e,t){const{removed:s,addedOrModified:r}=H(e,t);for(const i of s)await n.fs.rm(i,{force:!0});await n.mount(L(r))}class X{selectedFile=d();documents=N({});currentDocument=U([this.documents,this.selectedFile],(e,t)=>{if(t)return e[t]});setSelectedFile(e){this.selectedFile.set(e)}setDocuments(e){if(Array.isArray(e))this.documents.set(Object.fromEntries(e[1].map(t=>[t,{value:"",loading:!0,filePath:t}])));else{const t=this.documents.value;this.documents.set(Object.fromEntries(Object.entries(e).map(([s,r])=>[s,{value:r,loading:!1,filePath:s,scroll:t?.[s]?.scroll}])))}}updateScrollPosition(e,t){const s=this.documents.get()[e];s&&this.documents.setKey(e,{...s,scroll:t})}updateFile(e,t){const s=this.documents.get()[e];if(!s)return!1;const i=s.value!==t;return i&&this.documents.setKey(e,{...s,value:t}),i}onDocumentChanged(e,t){const s=this.currentDocument.subscribe(i=>{i?.filePath===e&&t(i)}),r=this.documents.subscribe(i=>{const o=i[e];o&&!o.loading&&queueMicrotask(()=>{t(o),r()})});return()=>{r(),s()}}}class S{port;ready;title;baseUrl;pathname;get url(){if(this.baseUrl)return new URL(this.pathname??"/",this.baseUrl).toString()}constructor(e,t){typeof e=="number"?this.port=e:Array.isArray(e)?(this.port=e[0],this.title=e[1]):(this.port=e.port,this.title=e.title),this.ready=!!t}static equals(e,t){return e.port===t.port&&e.pathname===t.pathname&&e.title===t.title}}class Z{_availablePreviews=new Map;_previewsLayout=[];previews=d([]);constructor(e){this.init(e)}async init(e){(await e).on("port",(s,r,i)=>{let o=this._availablePreviews.get(s);o||(o=new S(s,r==="open"),this._availablePreviews.set(s,o)),o.ready=r==="open",o.baseUrl=i,this._previewsLayout.length===0?this.previews.set([o]):(this._previewsLayout=[...this._previewsLayout],this.previews.set(this._previewsLayout))})}setPreviews(e){if(e===!1){this.previews.set([]);return}const t=e===!0?[]:e??[],s=t.map(i=>{const o=new S(i);let a=this._availablePreviews.get(o.port);return a?a.title=o.title:(a=o,this._availablePreviews.set(a.port,a)),a});let r=s.length!=this._previewsLayout.length;if(!r)for(let i=0;i<s.length&&(r=!S.equals(s[i],this._previewsLayout[i]),!r);i++);if(r)if(this._previewsLayout=s,t.length===0){const i=this._availablePreviews.values().next().value;this.previews.set(i?[i]:[])}else this.previews.set(this._previewsLayout)}}function K(){try{const n="SharedArrayBuffer"in globalThis,e=navigator.userAgent.includes("Chrome"),t=navigator.userAgent.includes("Firefox"),s=navigator.userAgent.includes("Safari");if(n&&(e||t))return!0;if(n&&s){const r=navigator.userAgent.match(/Version\/(\d+)\.(\d+) (?:Mobile\/.*?)?Safari/),i=r?Number(r?.[1]):0,o=r?Number(r?.[2]):0;return i>16||i===16&&o>=4}return!!localStorage.getItem("webcontainer_any_ua")}catch{return!1}}async function ee(n,e,t){const s=[];t?.allowRedirects||s.push("--no-redirects"),Array.isArray(t?.allowCommands)&&s.push("--allow-commands",t.allowCommands.join(","));const r=await n.spawn("/bin/jsh",["--osc",...s],{terminal:{cols:e.cols??80,rows:e.rows??15}}),i=r.input.getWriter(),o=r.output,a=$();let u=!1;return o.pipeTo(new WritableStream({write(l){if(!u){const[,c]=l.match(/\x1b\]654;([^\x07]+)\x07/)||[];c==="interactive"&&(u=!0,a.resolve())}e.write(l)}})),e.onData(l=>{u&&i.write(l)}),await a.promise,r}class A{_config;constructor(e){const t=re(e);this._config=t}get panels(){return this._config.panels}get activePanel(){return this._config.activePanel}}const te={output:"Output",terminal:"Terminal"};let se=0;class h{type;options;static panelCount={output:0,terminal:0};static resetCount(){this.panelCount={output:0,terminal:0}}id;title;_terminal;_process;_data=[];_onData;constructor(e,t){this.type=e,this.options=t;let s=t?.title;if(!s){s=te[e];const r=h.panelCount[e];r>0&&(s+=` ${r}`),h.panelCount[e]++}this.title=s,this.id=t?.id??(e==="output"?"output":`${e}-${se++}`)}get terminal(){return this._terminal}get process(){return this._process}get processOptions(){if(this.type!=="output")return{allowRedirects:this.options?.allowRedirects??!1,allowCommands:this.options?.allowCommands}}get cols(){return this._terminal?.cols}get rows(){return this._terminal?.rows}reset(){this._terminal?this._terminal.reset():this._data=[]}write(e){this._terminal?this._terminal.write(e):this._data.push(e)}onData(e){this._terminal?this._terminal.onData(e):this._onData=e}attachProcess(e){this._process=e,this.cols!=null&&this.rows!=null&&this._process.resize({cols:this.cols,rows:this.rows})}attachTerminal(e){for(const t of this._data)e.write(t);this._data=[],this._terminal=e,this._onData&&e.onData(this._onData),this.cols!=null&&this.rows!=null&&this._process?.resize({cols:this.cols,rows:this.rows})}}function re(n){let e=0;if(n===!1)return{panels:[],activePanel:e};if(h.resetCount(),n===void 0||n===!0)return{panels:[new h("output")],activePanel:e};const t=[],s={allowRedirects:n.allowRedirects,allowCommands:n.allowCommands};if(n.panels){if(n.panels==="output")t.push(new h("output"));else if(n.panels==="terminal")t.push(new h("terminal",s));else if(Array.isArray(n.panels))for(const r of n.panels){let i;typeof r=="string"?i=new h(r,s):Array.isArray(r)?i=new h(r[0],{title:r[1],...s}):i=new h(r.type,{id:r.id,title:r.title,allowRedirects:r.allowRedirects??n.allowRedirects,allowCommands:r.allowCommands??n.allowCommands}),t.push(i)}}return typeof n.activePanel=="number"&&(e=n.activePanel,e>=t.length&&(e=0)),{activePanel:e,panels:t}}class ne{_webcontainer;_useAuth;terminalConfig=d(new A);_output=void 0;_webcontainerLoaded=!1;constructor(e,t){this._webcontainer=e,this._useAuth=t,this._webcontainer.then(()=>{this._webcontainerLoaded=!0})}getOutputPanel(){return this._output}hasTerminalPanel(){return this.terminalConfig.get().panels.length>0}setTerminalConfiguration(e){const t=this.terminalConfig.get(),s=new A(e),r=new Map(t.panels.map(i=>[i.id,i]));for(const i of s.panels){const o=r.get(i.id);r.delete(i.id),o?.terminal&&i.attachTerminal(o.terminal),i.type==="output"&&(this._output=i),i.type==="terminal"&&!o&&this._bootWebContainer(i).then(async a=>{i.attachProcess(await ee(a,i,i.processOptions))}).catch(()=>{})}for(const i of r.values())i.process?.kill();this.terminalConfig.set(s)}async attachTerminal(e,t){const s=this.terminalConfig.get().panels.find(r=>r.id===e);s&&s.attachTerminal(t)}onTerminalResize(e,t){for(const s of this.terminalConfig.get().panels)s.process?.resize({cols:e,rows:t})}async _bootWebContainer(e){ie(e);const t=this._webcontainerLoaded;this._useAuth&&!t&&(e.write("Waiting for authentication to complete..."),await _.loggedIn(),b(e)),t||e.write("Booting WebContainer...");try{const s=await this._webcontainer;return t||b(e),s}catch(s){throw b(e),await j(),e.write([w.red("Looks like your browser's configuration is blocking WebContainers."),"","Let's troubleshoot this!","","Read more at:","https://webcontainers.io/guides/browser-config",""].join(`
`)),s}}}function ie(n){if(!K())throw n.write([w.red("Incompatible Web Browser"),"","WebContainers currently work in Chromium-based browsers, Firefox, and Safari 16.4. We're hoping to add support for more browsers as they implement the necessary Web Platform features.","","Read more about browser support:","https://webcontainers.io/guides/browser-support",""].join(`
`)),new Error("Incompatible Web Browser")}class oe{_webcontainer;_runner;_previewsStore;_editorStore;_terminalStore;_stepController=new V;_lessonFilesFetcher;_lessonTask;_lesson;_ref=1;_themeRef=d(1);_lessonFiles;_lessonSolution;_lessonTemplate;lessonFullyLoaded=d(!1);constructor({useAuth:e,webcontainer:t,baseURL:s}){this._webcontainer=t,this._editorStore=new X,this._lessonFilesFetcher=new B(s),this._previewsStore=new Z(this._webcontainer),this._terminalStore=new ne(this._webcontainer,e),this._runner=new G(this._webcontainer,this._terminalStore,this._stepController)}setLesson(e,t={}){e!==this._lesson&&(this._lessonTask?.cancel(),this._ref+=1,this._lesson=e,this.lessonFullyLoaded.set(!1),this._previewsStore.setPreviews(e.data.previews??!0),this._terminalStore.setTerminalConfiguration(e.data.terminal),this._runner.setCommands(e.data),this._editorStore.setDocuments(e.files),!t.ssr&&(this._lessonTask=m(async s=>{const r=this._lessonFilesFetcher.getLessonTemplate(e),i=this._lessonFilesFetcher.getLessonFiles(e),o=this._runner.prepareFiles({template:r,files:i,signal:s});this._runner.runCommands();const[a,u,l]=await Promise.all([r,this._lessonFilesFetcher.getLessonSolution(e),i]);s.throwIfAborted(),this._lessonTemplate=a,this._lessonFiles=l,this._lessonSolution=u,this._editorStore.setDocuments(l),e.data.focus===void 0?this._editorStore.setSelectedFile(void 0):l[e.data.focus]!==void 0&&this._editorStore.setSelectedFile(e.data.focus),await o,s.throwIfAborted(),this.lessonFullyLoaded.set(!0)},{ignoreCancel:!0})))}get previews(){return this._previewsStore.previews}get terminalConfig(){return this._terminalStore.terminalConfig}get currentDocument(){return this._editorStore.currentDocument}get documents(){return this._editorStore.documents}get selectedFile(){return this._editorStore.selectedFile}get lesson(){return this._lesson}get ref(){return this._ref}get themeRef(){return this._themeRef}get steps(){return this._stepController.steps}hasFileTree(){if(!this._lesson)return!1;const{editor:e}=this._lesson.data;return e===void 0||e===!0||e!==!1&&e?.fileTree!==!1}hasEditor(){if(!this._lesson)return!1;const{editor:e}=this._lesson.data;return e!==!1}hasPreviews(){if(!this._lesson)return!1;const{previews:e}=this._lesson.data;return e!==!1}hasTerminalPanel(){return this._terminalStore.hasTerminalPanel()}hasSolution(){return!!this._lesson&&Object.keys(this._lesson.solution).length>=1}reset(){!this.lessonFullyLoaded.value||!this._lessonFiles||(this._editorStore.setDocuments(this._lessonFiles),this._runner.updateFiles(this._lessonFiles))}solve(){!this.lessonFullyLoaded.value||!this._lessonSolution||(this._editorStore.setDocuments(this._lessonSolution),this._runner.updateFiles(this._lessonSolution))}setSelectedFile(e){this._editorStore.setSelectedFile(e)}updateFile(e,t){this._editorStore.updateFile(e,t)&&this._runner.updateFile(e,t)}updateFiles(e){this._runner.updateFiles(e)}setCurrentDocumentContent(e){const t=this.currentDocument.get()?.filePath;t&&this.updateFile(t,e)}setCurrentDocumentScrollPosition(e){const t=this.currentDocument.get();if(!t)return;const{filePath:s}=t;this._editorStore.updateScrollPosition(s,e)}attachTerminal(e,t){this._terminalStore.attachTerminal(e,t)}onTerminalResize(e,t){e&&t&&(this._terminalStore.onTerminalResize(e,t),this._runner.onTerminalResize(e,t))}onDocumentChanged(e,t){return this._editorStore.onDocumentChanged(e,t)}refreshStyles(){this._themeRef.set(this._themeRef.get()+1)}}const D=!1;function ae(n,...e){let t=n;for(const s of e){const r=t.endsWith("/"),i=s.startsWith("/");r&&i?t+=s.slice(1):r||i?t+=s:t+=`/${s}`}return t}let k=new Promise(()=>{});k=Promise.resolve(null).then(()=>I.boot({workdirName:"tutorial"})),k.then(()=>{le.loaded=!0});const de=new oe({webcontainer:k,useAuth:D,baseURL:ae("/tutorial-vite-plugin","/")});async function me(){_.startAuthFlow({popup:!0}),await _.loggedIn()}function fe(){_.logout({ignoreRevokeError:!0})}const le={useAuth:D,loggedIn:()=>_.loggedIn(),loaded:!1};export{fe as a,me as l,de as t};
